(function(t){function e(e){for(var r,o,i=e[0],c=e[1],u=e[2],d=0,h=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&h.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(h.length)h.shift()();return n.push.apply(n,u||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],r=!0,i=1;i<s.length;i++){var c=s[i];0!==a[c]&&(r=!1)}r&&(n.splice(e--,1),t=o(o.s=s[0]))}return t}var r={},a={app:0},n=[];function o(e){if(r[e])return r[e].exports;var s=r[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=r,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(s,r,function(e){return t[e]}.bind(null,r));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/minion/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"12a2":function(t,e,s){"use strict";var r=s("82ee"),a=s.n(r);a.a},"1b55":function(t,e,s){},"3a7d":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var r=s("2b0e"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[t.isLoggedIn&&t.currentPage.includes("/doc/")?t._e():s("nav",{staticClass:"navbar navbar-expand-lg navbar-light bb-0 bg-white px-3"},[s("a",{staticClass:"navbar-brand",attrs:{href:"/"}},[t._v("Minion Events")]),s("ul",{staticClass:"navbar-nav ml-auto flex-sm-row flex-column"},[s("li",{staticClass:"nav-item",class:["/"==t.currentPage?"active":""]},[s("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[t._v("Home")])],1),s("li",{staticClass:"nav-item",class:["/login"==t.currentPage?"active":""]},[t.isLoggedIn?t._e():s("router-link",{staticClass:"nav-link",attrs:{to:"/login"}},[t._v("Login")])],1),s("li",{staticClass:"nav-item",class:["/register"==t.currentPage?"active":""]},[t.isLoggedIn?t._e():s("router-link",{staticClass:"nav-link",attrs:{to:"/register"}},[t._v("Register")])],1),t.isLoggedIn?s("li",{staticClass:"nav-item",staticStyle:{cursor:"pointer"}},[s("a",{staticClass:"nav-link",on:{click:function(e){return e.preventDefault(),t.logout(e)}}},[t._v("Logout")])]):t._e(),t.isLoggedIn?s("li",{staticClass:"nav-item",class:["/events"===t.currentPage?"active":""]},[s("router-link",{staticClass:"nav-link",attrs:{to:"/events"}},[t._v("View Events")])],1):t._e(),t.isLoggedIn?s("li",{staticClass:"nav-item"},[s("a",{staticClass:"nav-link dropdown-toggle",attrs:{"data-toggle":"dropdown",href:"#"},on:{click:t.showNotifications}},[s("span",{directives:[{name:"show",rawName:"v-show",value:t.notifications.length>0,expression:"notifications.length > 0"}],staticClass:"badge badge-success badge-pill"},[t._v(t._s(t.notifications.length))]),t._v(" Notifications ")]),s("transition",{attrs:{name:"fade",duration:200}},[t.is_visible?s("ul",{staticClass:"dropdown-menu notify-drop"},[s("div",{staticClass:"notify-drop-title"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6 col-sm-6 col-xs-6"},[t._v("Notifications ("),s("b",[t._v(t._s(t.notifications.length))]),t._v(") ")]),s("div",{staticClass:"col-md-6 col-sm-6 col-xs-6 text-right"},[s("span",{staticClass:"rIcon allRead",attrs:{"data-tooltip":"tooltip",title:"Close"},on:{click:t.hide}},[s("i",{staticClass:"fa fa-close"})])])])]),s("div",{staticClass:"drop-content"},t._l(t.notifications,(function(e){return s("li",{key:e.id},[s("div",{staticClass:"col-md-9 col-sm-9 col-xs-9 pd-l0 ml-3 py-2"},[s("i",[t._v(t._s(e.message))])])])})),0),s("div",{staticClass:"notify-drop-footer text-center"},[s("a",{attrs:{href:"#"}},[s("i",{staticClass:"fa fa-eye"}),t._v("You have "+t._s(t.notifications.length)+" unread notifications")])])]):t._e()])],1):t._e()])]),s("router-view")],1)},n=[],o=(s("a15b"),s("5638")),i={name:"App",components:{},created:function(){this.$store.dispatch("events/fetchNotifications",{}),window.Echo=new o["a"]({broadcaster:"pusher",key:"8cbe849dd186fe39a1b4",cluster:"ap2",encrypted:!0,authEndpoint:this.$http.defaults.baseURL+"/broadcasting/auth",auth:{headers:{Authorization:localStorage.getItem("token"),Accept:"application/json"}}})},beforeMount:function(){var t=this,e="presence-online";window.Echo.private("presence-events").listen("NewNotification",(function(e){return t.$store.commit("events/add_notification",{notification:e.notification})})),window.Echo.join(e).here((function(e){var s=localStorage.getItem("user")||"{}",r=JSON.parse(s);t.$store.commit("docs/current_viewers",e),t.$store.commit("docs/remove_current_viewer",r)})).joining((function(e){console.table(e),t.$store.commit("docs/add_current_viewer",e)})).leaving((function(e){console.table(e),t.$store.commit("docs/remove_current_viewer",e)}))},beforeRouteEnter:function(t,e,s){s((function(t){window.Echo=new o["a"]({broadcaster:"pusher",key:"8cbe849dd186fe39a1b4",cluster:"ap2",encrypted:!0,authEndpoint:t.$http.defaults.baseURL+"/broadcasting/auth",auth:{headers:{Authorization:localStorage.getItem("token"),Accept:"application/json"}}})}))},data:function(){return{is_visible:!1}},computed:{isLoggedIn:function(){return this.$store.getters["auth/isLoggedIn"]},currentPage:function(){return this.$route.path},notifications:function(){return this.$store.getters["events/notifications"]}},methods:{logout:function(){var t=this;this.$store.dispatch("logout").then((function(){t.$router.push("/login")}))},showNotifications:function(){this.is_visible=!0},hide:function(){console.log("hide"),this.is_visible=!1}}},c=i,u=(s("5c0b"),s("906e"),s("2877")),l=Object(u["a"])(c,a,n,!1,null,"209da648",null),d=l.exports,h=s("2f62"),m=(s("d3b7"),s("96cf"),s("1da1")),v=s("bc3a"),f=s.n(v),p=function(){return f.a.create({baseURL:"https://pminion-app.herokuapp.com",withCredentials:!1,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:localStorage.getItem("token")}})},w=s("cd4e"),g="/auth/v1",_=p();Object(w["loadProgressBar"])({},_),_.defaults.headers.common["Authorization"]=localStorage.getItem("token"),_.interceptors.request.use(function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(e){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=localStorage.getItem("token"),s&&(console.log(s),e.headers.Authorization="".concat(s)),t.abrupt("return",e);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){return Promise.reject(t)}));var b={status:"",token:localStorage.getItem("token")||"",user:{}},C={auth_request:function(t){t.status="loading"},auth_success:function(t,e){t.status="success",t.token=e.token,t.user=e.user},auth_error:function(t){t.status="error"},logout:function(t){t.status="",t.token=""}},y={register:function(t,e){var s=t.commit;return new Promise((function(t,r){s("auth_request"),_({url:g+"/register",data:e,method:"POST"}).then((function(e){var r="Bearer "+e.data.access_token;localStorage.setItem("token",r),_.defaults.headers.common["Authorization"]=r,s("auth_success",{token:r,user:e.data.user}),localStorage.setItem("user",JSON.stringify(e.data.user)),t(e)})).catch((function(t){s("auth_error",t),localStorage.removeItem("token"),r(t)}))}))},login:function(t,e){var s=t.commit;return new Promise((function(t,r){s("auth_request"),_({url:g+"/login",data:e,method:"POST"}).then((function(e){var r="Bearer "+e.data.access_token;localStorage.setItem("token",r),_.defaults.headers.common["Authorization"]=r,s("auth_success",{token:r,user:e.data.user}),localStorage.setItem("user",JSON.stringify(e.data.user)),t()})).catch((function(t){s("auth_error"),localStorage.removeItem("token"),r(t)}))}))},logout:{root:!0,handler:function(t){var e=t.commit;return new Promise((function(t){e("logout"),localStorage.removeItem("token"),localStorage.removeItem("user"),delete _.defaults.headers.common["Authorization"],t()}))}}},x={isLoggedIn:function(t){return!!t.token},authStatus:function(t){return t.status}},k={namespaced:!0,state:b,getters:x,actions:y,mutations:C},E=(s("4ec9"),s("3ca3"),s("ddb0"),s("ac1f"),s("466d"),s("5319"),function(t){var e=new Date(t),s=new Date,r=(s.getTime()-e.getTime())/1e3;if(r<60)return parseInt(r)+" s";if(r<3600)return parseInt(r/60)+" m";if(r<=86400)return parseInt(r/3600)+" h";if(r>86400){var a=e.getDate(),n=e.toDateString().match(/ [a-zA-Z]*/)[0].replace(" ",""),o=e.getFullYear()==s.getFullYear()?"":" "+e.getFullYear();return a+" "+n+" "+o}}),D=function(t){for(var e="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=s.length,a=0;a<t;a++)e+=s.charAt(Math.floor(Math.random()*r));return e},A={timeSince:E,makeid:D},$="/api/v1/docs",P=p();Object(w["loadProgressBar"])({},P),P.defaults.headers.common["Authorization"]=localStorage.getItem("token"),P.interceptors.request.use(function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(e){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=localStorage.getItem("token"),s&&(e.headers.Authorization="".concat(s)),t.abrupt("return",e);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){return Promise.reject(t)}));var S={viewers:new Map,ownedDocs:[],recentlyViewedDocs:[],token:localStorage.getItem("token")||"",user:localStorage.getItem("user")||"",showViewers:!1,showShareDialog:!1,isAuthorized:!1,currentDoc:{},currentViewers:new Map,reRenderKey:A.makeid(6),users:[]},O={docs_request:function(t){t.status="loading"},docs_success:function(t,e){if(t.status="success",Object.prototype.hasOwnProperty.call(e,"ownedDocs")&&(t.ownedDocs=e.ownedDocs),Object.prototype.hasOwnProperty.call(e,"doc")&&t.ownedDocs.push(e.doc),Object.prototype.hasOwnProperty.call(e,"isAuthorized")&&(t.isAuthorized=e.isAuthorized),Object.prototype.hasOwnProperty.call(e,"recentlyViewedDocs")&&(t.recentlyViewedDocs=e.recentlyViewedDocs),Object.prototype.hasOwnProperty.call(e,"currentDoc")&&(t.currentDoc=e.currentDoc),Object.prototype.hasOwnProperty.call(e,"users")&&(t.users=e.users),Object.prototype.hasOwnProperty.call(e,"viewers")){t.viewers=new Map;for(var s=0;s<e.viewers.length;s++){var r=e.viewers[s];t.viewers.set(r.email,r)}}},docs_error:function(t){t.status="error"},show_viewers:function(t){t.showViewers=!0},hide_viewers:function(t){t.showViewers=!1},show_share_dialog:function(t){t.showShareDialog=!0},hide_share_dialog:function(t){t.showShareDialog=!1},current_viewers:function(t,e){t.currentViewers=new Map;for(var s=0;s<e.length;s++){var r=e[s];t.currentViewers.set(r.email,r)}t.reRenderKey=A.makeid(6)},add_current_viewer:function(t,e){t.currentViewers.set(e.email,e),t.viewers.set(e.email,e),t.reRenderKey=A.makeid(6)},remove_current_viewer:function(t,e){t.currentViewers.delete(e.email),t.reRenderKey=A.makeid(6)}},I={checkIfAuthenticated:function(t){var e=t.rootGetters;return new Promise((function(t,s){e["auth/isLoggedIn"]?(P.defaults.headers.common["Authorization"]=localStorage.getItem("token"),t()):s("Unauthenticated")}))},checkAndLogout:function(t,e){var s=t.dispatch;if(void 0!==e.response.status)switch(e.response.status){case 401:s("logout",null,{root:!0});break;default:console.log(e.response)}else console.log("checkAndLogout error : ",e)},fetchOwnedDocs:function(t){var e=t.dispatch,s=t.commit;return new Promise((function(t,r){s("docs_request"),e("checkIfAuthenticated").then((function(){P({url:$,method:"GET"}).then((function(e){s("docs_success",{ownedDocs:e.data.data}),t(e.data)})).catch((function(t){e("checkAndLogout",t),s("docs_error",t),r(t)}))})).catch((function(t){s("docs_error",t),r(t)}))}))},fetchViewedDocs:function(t){var e=t.dispatch,s=t.commit;return new Promise((function(t,r){s("docs_request"),e("checkIfAuthenticated").then((function(){P({url:$+"/viewed",method:"GET"}).then((function(e){s("docs_success",{recentlyViewedDocs:e.data.data}),t(e.data)})).catch((function(t){e("checkAndLogout",t),s("docs_error",t),r(t)}))})).catch((function(t){s("docs_error",t),r(t)}))}))},fetchViewers:function(t,e){var s=t.dispatch,r=t.commit;return new Promise((function(t,a){r("docs_request"),s("checkIfAuthenticated").then((function(){P({url:$+"/"+e.id+"/viewers",method:"GET"}).then((function(e){r("docs_success",{viewers:e.data.data}),t(e.data)})).catch((function(t){s("checkAndLogout",t),r("docs_error",t),a(t)}))})).catch((function(t){r("docs_error",t),a(t)}))}))},fetchDocument:function(t,e){var s=t.dispatch,r=t.commit;return new Promise((function(t,a){r("docs_request"),s("checkIfAuthenticated").then((function(){P({url:$+"/"+e.id,method:"GET"}).then((function(e){r("docs_success",{currentDoc:e.data.data}),t(e.data)})).catch((function(t){s("checkAndLogout",t),r("docs_error",t),a(t)}))})).catch((function(t){r("docs_error",t),a(t)}))}))},checkIsAuthorized:function(t,e){var s=t.dispatch,r=t.commit;return new Promise((function(t,a){r("docs_request"),s("checkIfAuthenticated").then((function(){P({url:$+"/"+e.id+"/is_authorized",method:"GET"}).then((function(e){r("docs_success",{isAuthorized:!0}),t(e.data)})).catch((function(t){r("docs_success",{isAuthorized:!1}),a(t)}))})).catch((function(t){r("docs_error",t),a(t)}))}))},shareDoc:function(t,e){var s=t.dispatch,r=t.commit;return new Promise((function(t,a){r("docs_request");var n={accessRole:"edit"};n["sharingTo"]=e["sharingTo"],s("checkIfAuthenticated").then((function(){P({url:$+"/"+e.id+"/share",data:n,method:"PUT"}).then((function(e){r("docs_success",{shared:!0}),t(e.data)})).catch((function(t){r("docs_error",t),a(t)}))})).catch((function(t){r("docs_error",t),a(t)}))}))},fetchUsers:function(t){var e=t.dispatch,s=t.commit;return new Promise((function(t,r){s("docs_request"),e("checkIfAuthenticated").then((function(){P({url:"/api/v1/users",method:"GET"}).then((function(e){s("docs_success",{users:e.data.data}),t(e.data)})).catch((function(t){s("docs_error",t),r(t)}))})).catch((function(t){s("docs_error",t),r(t)}))}))},create:function(t,e){var s=t.dispatch,r=t.commit;return new Promise((function(t,a){r("docs_request"),s("checkIfAuthenticated").then((function(){P({url:$,data:e,method:"POST"}).then((function(e){r("docs_success",{doc:e.data.data}),t(e.data)})).catch((function(t){r("docs_error",t),a(t)}))})).catch((function(t){r("docs_error",t),a(t)}))}))}},j={isLoggedIn:function(t){return!!t.token},ownedDocs:function(t){return t.ownedDocs},recentlyViewedDocs:function(t){return t.recentlyViewedDocs},viewers:function(t){return t.viewers},showViewers:function(t){return t.showViewers},currentViewers:function(t){return t.currentViewers},currentDoc:function(t){return t.currentDoc},reRenderKey:function(t){return t.reRenderKey},isAuthorized:function(t){return t.isAuthorized},showShareDialog:function(t){return t.showShareDialog},users:function(t){return t.users}},V={namespaced:!0,state:S,getters:j,actions:I,mutations:O},L="/api/v1/events",q=p();Object(w["loadProgressBar"])({},q),q.defaults.headers.common["Authorization"]=localStorage.getItem("token"),q.interceptors.request.use(function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(e){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=localStorage.getItem("token"),s&&(e.headers.Authorization="".concat(s)),t.abrupt("return",e);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){return Promise.reject(t)}));var z={allEvents:[],createdEvents:[],participatedEvents:[],token:localStorage.getItem("token")||"",user:localStorage.getItem("user")||"",hasParticipated:!1,showViewers:!1,showShareDialog:!1,isAuthorized:!1,currentEvent:{},currentViewers:new Map,reRenderKey:A.makeid(6),notifications:[]},R={events_request:function(t){t.status="loading"},events_success:function(t,e){t.status="success",Object.prototype.hasOwnProperty.call(e,"createdEvents")&&(t.createdEvents=e.createdEvents),Object.prototype.hasOwnProperty.call(e,"doc")&&t.createdEvents.push(e.doc),Object.prototype.hasOwnProperty.call(e,"hasParticipated")&&(t.hasParticipated=e.hasParticipated),Object.prototype.hasOwnProperty.call(e,"isAuthorized")&&(t.isAuthorized=e.isAuthorized),Object.prototype.hasOwnProperty.call(e,"participatedEvents")&&(t.participatedEvents=e.participatedEvents),Object.prototype.hasOwnProperty.call(e,"currentEvent")&&(t.currentEvent=e.currentEvent),Object.prototype.hasOwnProperty.call(e,"notifications")&&(t.notifications=e.notifications),Object.prototype.hasOwnProperty.call(e,"allEvents")&&(t.allEvents=e.allEvents)},events_error:function(t){t.status="error"},show_viewers:function(t){t.showViewers=!0},hide_viewers:function(t){t.showViewers=!1},show_share_dialog:function(t){t.showShareDialog=!0},hide_share_dialog:function(t){t.showShareDialog=!1},add_notification:function(t,e){if(void 0!=t.user&&t.user.length>0){var s=JSON.parse(t.user);s.id==e.notification.user_id&&t.notifications.unshift(e.notification)}}},N={checkIfAuthenticated:function(t){var e=t.rootGetters;return new Promise((function(t,s){e["auth/isLoggedIn"]?(q.defaults.headers.common["Authorization"]=localStorage.getItem("token"),t()):s("Unauthenticated")}))},checkAndLogout:function(t,e){var s=t.dispatch;if(void 0!==e.response.status)switch(e.response.status){case 401:s("logout",null,{root:!0});break;default:console.log(e.response)}else console.log("checkAndLogout error : ",e)},fetchCreatedEvents:function(t){var e=t.dispatch,s=t.commit;return new Promise((function(t,r){s("events_request"),e("checkIfAuthenticated").then((function(){q({url:L+"/created",method:"GET"}).then((function(e){s("events_success",{createdEvents:e.data.data}),t(e.data)})).catch((function(t){e("checkAndLogout",t),s("events_error",t),r(t)}))})).catch((function(t){s("events_error",t),r(t)}))}))},fetchParticipatedEvents:function(t){var e=t.dispatch,s=t.commit;return new Promise((function(t,r){s("events_request"),e("checkIfAuthenticated").then((function(){q({url:L+"/participated",method:"GET"}).then((function(e){s("events_success",{participatedEvents:e.data.data}),t(e.data)})).catch((function(t){e("checkAndLogout",t),s("events_error",t),r(t)}))})).catch((function(t){s("events_error",t),r(t)}))}))},fetchAllEvents:function(t){var e=t.dispatch,s=t.commit;return new Promise((function(t,r){s("events_request"),e("checkIfAuthenticated").then((function(){q({url:L,method:"GET"}).then((function(e){s("events_success",{allEvents:e.data.data}),t(e.data)})).catch((function(t){e("checkAndLogout",t),s("events_error",t),r(t)}))})).catch((function(t){s("events_error",t),r(t)}))}))},fetchEvent:function(t,e){var s=t.dispatch,r=t.commit;return new Promise((function(t,a){r("events_request"),s("checkIfAuthenticated").then((function(){q({url:L+"/"+e.id,method:"GET"}).then((function(e){r("events_success",{currentEvent:e.data.data}),t(e.data)})).catch((function(t){s("checkAndLogout",t),r("events_error",t),a(t)}))})).catch((function(t){r("events_error",t),a(t)}))}))},deleteEvent:function(t,e){var s=t.dispatch,r=t.commit;return new Promise((function(t,a){r("events_request"),s("checkIfAuthenticated").then((function(){q({url:L+"/"+e.id,method:"DELETE"}).then((function(e){r("events_success",{deleted:!0}),t(e.data)})).catch((function(t){s("checkAndLogout",t),r("events_error",t),a(t)}))})).catch((function(t){r("events_error",t),a(t)}))}))},joinEvent:function(t,e){var s=t.dispatch,r=t.commit;return new Promise((function(t,a){r("events_request"),s("checkIfAuthenticated").then((function(){q({url:L+"/"+e.id+"/join",method:"PUT"}).then((function(e){r("events_success",{joined:!0}),t(e.data)})).catch((function(t){s("checkAndLogout",t),r("events_error",t),a(t)}))})).catch((function(t){r("events_error",t),a(t)}))}))},leaveEvent:function(t,e){var s=t.dispatch,r=t.commit;return new Promise((function(t,a){r("events_request"),s("checkIfAuthenticated").then((function(){q({url:L+"/"+e.id+"/leave",method:"PUT"}).then((function(e){r("events_success",{left:!0}),t(e.data)})).catch((function(t){s("checkAndLogout",t),r("events_error",t),a(t)}))})).catch((function(t){r("events_error",t),a(t)}))}))},likeEvent:function(t,e){var s=t.dispatch,r=t.commit;return new Promise((function(t,a){r("events_request"),s("checkIfAuthenticated").then((function(){q({url:L+"/"+e.id+"/like",method:"PUT"}).then((function(e){r("events_success",{liked:!0}),t(e.data)})).catch((function(t){s("checkAndLogout",t),r("events_error",t),a(t)}))})).catch((function(t){r("events_error",t),a(t)}))}))},unlikeEvent:function(t,e){var s=t.dispatch,r=t.commit;return new Promise((function(t,a){r("events_request"),s("checkIfAuthenticated").then((function(){q({url:L+"/"+e.id+"/unlike",method:"PUT"}).then((function(e){r("events_success",{unliked:!0}),t(e.data)})).catch((function(t){s("checkAndLogout",t),r("events_error",t),a(t)}))})).catch((function(t){r("events_error",t),a(t)}))}))},removeParticipant:function(t,e){var s=t.dispatch,r=t.commit;return new Promise((function(t,a){r("events_request"),s("checkIfAuthenticated").then((function(){q({url:L+"/"+e.id+"/users/"+e.userId+"/remove",method:"PUT"}).then((function(e){r("events_success",{removed:!0}),t(e.data)})).catch((function(t){s("checkAndLogout",t),r("events_error",t),a(t)}))})).catch((function(t){r("events_error",t),a(t)}))}))},checkIsAuthorized:function(t,e){var s=t.dispatch,r=t.commit;return new Promise((function(t,a){r("events_request"),s("checkIfAuthenticated").then((function(){q({url:L+"/"+e.id+"/is_authorized",method:"GET"}).then((function(e){r("events_success",{isAuthorized:!0}),t(e.data)})).catch((function(t){r("events_success",{isAuthorized:!1}),a(t)}))})).catch((function(t){r("events_error",t),a(t)}))}))},fetchHasParticipated:function(t,e){var s=t.dispatch,r=t.commit;return new Promise((function(t,a){r("events_request"),s("checkIfAuthenticated").then((function(){q({url:L+"/"+e.id+"/has-participated",method:"GET"}).then((function(e){r("events_success",{hasParticipated:e.data.data.hasParticipated}),t(e.data)})).catch((function(t){r("events_error",t),a(t)}))})).catch((function(t){r("events_error",t),a(t)}))}))},fetchNotifications:function(t){var e=t.dispatch,s=t.commit;return new Promise((function(t,r){s("events_request"),e("checkIfAuthenticated").then((function(){q({url:L+"/users/notifications",method:"GET"}).then((function(e){s("events_success",{notifications:e.data.data.notifications}),t(e.data)})).catch((function(t){s("events_error",t),r(t)}))})).catch((function(t){s("events_error",t),r(t)}))}))},create:function(t,e){var s=t.dispatch,r=t.commit;return new Promise((function(t,a){r("events_request"),s("checkIfAuthenticated").then((function(){q({url:L,data:e,method:"POST"}).then((function(e){r("events_success",{doc:e.data.data}),t(e.data)})).catch((function(t){r("events_error",t),a(t)}))})).catch((function(t){r("events_error",t),a(t)}))}))}},T={isLoggedIn:function(t){return!!t.token},createdEvents:function(t){return t.createdEvents},participatedEvents:function(t){return t.participatedEvents},allEvents:function(t){return t.allEvents},showViewers:function(t){return t.showViewers},currentViewers:function(t){return t.currentViewers},currentEvent:function(t){return t.currentEvent},reRenderKey:function(t){return t.reRenderKey},isAuthorized:function(t){return t.isAuthorized},showShareDialog:function(t){return t.showShareDialog},notifications:function(t){return t.notifications},hasParticipated:function(t){return t.hasParticipated}},M={namespaced:!0,state:z,getters:T,actions:N,mutations:R},U=s("b054"),G=s.n(U);r["a"].use(h["a"]);var H=!1,K=new h["a"].Store({modules:{auth:k,docs:V,events:M},strict:H,plugins:H?[G()()]:[]}),J=(s("45fc"),s("8c4f")),F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container "},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6 bg-white card mt-2 mx-auto px-0"},[t._m(0),s("div",{staticClass:"card-body container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-10 mx-auto"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.error.length>0,expression:"error.length > 0"}],staticClass:"alert alert-danger"},[t._v(t._s(t.error))]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"bmd-label-floating",attrs:{for:"email"}},[t._v("Email address")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{id:"email",required:"",type:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"bmd-label-floating",attrs:{for:"password"}},[t._v("Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),s("button",{staticClass:"btn btn-raised btn-primary",attrs:{type:"submit"}},[t._v("Login")])])])])])])])])},Y=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header mx-0 px-0"},[s("h3",{staticClass:"card-title mx-auto text-center"},[t._v("Login")])])}],B={data:function(){return{email:"",password:"",error:""}},watch:{email:function(){this.error=""},password:function(){this.error=""}},methods:{login:function(){var t=this,e=this.email,s=this.password;this.$store.dispatch("auth/login",{email:e,password:s}).then((function(){t.$router.push({name:"events",params:{}}),console.log("Logged In")})).catch((function(e){console.log(e),void 0==e||e.response.success||(t.error=e.response.data.error)}))}}},W=B,Z=Object(u["a"])(W,F,Y,!1,null,null,null),Q=Z.exports,X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container "},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6 bg-white card mt-2 mx-auto px-0"},[t._m(0),s("div",{staticClass:"card-body container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-10 mx-auto"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.register(e)}}},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"bmd-label-floating",attrs:{for:"name"}},[t._v("Name")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{id:"name",type:"text",placeholder:"Enter your name",required:"",autofocus:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._l(t.error.name,(function(e){return s("small",{directives:[{name:"show",rawName:"v-show",value:t.error.name,expression:"error.name"}],key:e,staticClass:"form-text text-danger",attrs:{id:"nameHelp"}},[t._v(t._s(e)+" ")])}))],2),s("div",{staticClass:"form-group"},[s("label",{staticClass:"bmd-label-floating",attrs:{for:"company"}},[t._v("Company (optional)")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.company,expression:"company"}],staticClass:"form-control",attrs:{id:"company",type:"text",placeholder:"Enter company name"},domProps:{value:t.company},on:{input:function(e){e.target.composing||(t.company=e.target.value)}}}),t._l(t.error.company,(function(e){return s("small",{directives:[{name:"show",rawName:"v-show",value:t.error.company,expression:"error.company"}],key:e,staticClass:"form-text text-danger",attrs:{id:"companyHelp"}},[t._v(t._s(e)+" ")])}))],2),s("div",{staticClass:"form-group"},[s("label",{staticClass:"bmd-label-floating",attrs:{for:"email"}},[t._v("Email address")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{id:"email",required:"",type:"email",placeholder:"Enter your email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._l(t.error.email,(function(e){return s("small",{directives:[{name:"show",rawName:"v-show",value:t.error.email,expression:"error.email"}],key:e,staticClass:"form-text text-danger",attrs:{id:"emailHelp"}},[t._v(t._s(e)+" ")])}))],2),s("div",{staticClass:"form-group"},[s("label",{staticClass:"bmd-label-floating",attrs:{for:"password"}},[t._v("Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{id:"password",type:"password",required:"",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._l(t.error.password,(function(e){return s("small",{directives:[{name:"show",rawName:"v-show",value:t.error.password,expression:"error.password"}],key:e,staticClass:"form-text text-danger",attrs:{id:"passwordHelp"}},[t._v(t._s(e)+" ")])}))],2),s("button",{staticClass:"btn btn-raised btn-primary",attrs:{type:"submit"}},[t._v("Register")])])])])])])])])},tt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header mx-0 px-0"},[s("h3",{staticClass:"card-title mx-auto text-center"},[t._v("Register")])])}],et=(s("b0c0"),{data:function(){return{name:"",email:"",password:"",company:"",error:{}}},watch:{email:function(){this.error={}},name:function(){this.error={}},password:function(){this.error={}},company:function(){this.error={}}},methods:{register:function(){var t=this,e={name:this.name,email:this.email,password:this.password,company:this.company};this.$store.dispatch("auth/register",e).then((function(){return t.$router.push("/")})).catch((function(e){console.log(e.response),t.error=e.response.data.errors}))}}}),st=et,rt=Object(u["a"])(st,X,tt,!1,null,null,null),at=rt.exports,nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("Layout",{scopedSlots:t._u([{key:"header",fn:function(){return[s("Header",{attrs:{doc_id:t.$route.params.id}})]},proxy:!0},{key:"main",fn:function(){return[s("Main",{attrs:{doc_id:t.$route.params.id}})]},proxy:!0}])})],1)},ot=[],it=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("header",[t._t("header")],2),s("main",[t._t("main")],2),s("footer",[t._t("footer")],2)])},ct=[],ut={},lt=Object(u["a"])(ut,it,ct,!1,null,null,null),dt=lt.exports,ht=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"navbar navbar-expand-lg navbar-light bb-0 bg-white px-3"},[s("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[t._v("Postman Docs")]),s("span",{staticClass:"navbar-brand text-muted text-capitalize"},[t._v(t._s(t.currentDoc.title))]),s("div",{staticClass:"ml-auto",staticStyle:{display:"inline-flex"}},[s("div",{staticClass:"presence-inline-block docs-titlebar-button d-flex",attrs:{id:"docs-presence-container"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.current_viewers&&t.current_viewers.length>0,expression:"current_viewers && current_viewers.length > 0"}],key:t.reRenderKey,staticClass:"presence-inline-block mr-auto",attrs:{id:"docs-presence"}},[s("div",{staticClass:"docs-presence-plus-widget presence-inline-block",staticStyle:{"max-width":"170px"}},[t._l(t.current_viewers.slice(0,4),(function(e,r){return s("div",{key:e.email,staticClass:"docs-presence-plus-widget-inner presence-inline-block",style:0===r?"":"left:"+-10*r+"px",on:{mouseover:function(s){return t.showUserDetails(e)},mouseleave:t.hideUserDetails}},[s("img",{staticClass:"rounded-circle mw-100 mh-100 user-img-thumb",attrs:{src:"https://ui-avatars.com/api/?name="+e.name.replace(/ /g,"+")+"&size=50",alt:""}})])})),t.current_viewers.length>4?s("div",{staticClass:"docs-presence-plus-widget-inner presence-inline-block",style:"left:-40px",attrs:{title:"and "+(t.current_viewers.length-4)+" more members"}},[s("div",{staticClass:"rounded-circle mw-100 mh-100 extra-user",on:{click:t.showViewers}},[s("span",[t._v("+"+t._s(t.current_viewers.length-4))])])]):t._e()],2),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showDetails,expression:"showDetails"}],staticClass:" user-details",attrs:{"aria-labelledby":""}},[s("div",{staticClass:"row mx-0 px-2 py-4"},[t._m(0),s("div",{staticClass:"col-9"},[s("span",{staticClass:"user-name d-block"},[t._v(t._s(t.currentDetails.name))]),s("a",{staticClass:"user-email",attrs:{href:"mailto:"}},[t._v(t._s(t.currentDetails.email))])])])])]),t.viewers.length>0?s("div",{staticClass:"d-inline view-history-btn",attrs:{title:"View all viewers"},on:{click:t.showViewers}},[s("i",{staticClass:"rounded-circle mw-100 mh-100 fa fa-line-chart"})]):t._e()]),s("button",{staticClass:"share-btn",attrs:{type:"button"},on:{click:t.showShareDialog}},[s("i",{staticClass:"fa fa-user mr-1"}),t._v(" Share")])])],1)},mt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-3"},[s("img",{staticClass:"rounded-circle user-img-thumb",attrs:{src:"https://ui-avatars.com/api/?name=John+Doe&size=50",alt:""}})])}],vt=(s("a630"),s("2909")),ft={name:"Header",props:["doc_id"],watch:{reRenderKey:function(){this.current_viewers=Array.from(this.$store.getters["docs/currentViewers"].values())}},computed:{reRenderKey:function(){return this.$store.getters["docs/reRenderKey"]},viewers:function(){return Object(vt["a"])(this.$store.getters["docs/viewers"].values())},user:function(){var t=localStorage.getItem("user");return void 0!==t&&null!==t&&t},currentDoc:function(){return this.$store.getters["docs/currentDoc"]}},data:function(){return{menuVisible:!1,showDetails:!1,currentDetails:{},current_viewers:[]}},methods:{showUserDetails:function(t){this.currentDetails=t,this.showDetails=!0},showViewers:function(){this.$store.commit("docs/show_viewers")},showShareDialog:function(){this.$store.dispatch("docs/fetchUsers",{}),this.$store.commit("docs/show_share_dialog")},hideUserDetails:function(){this.showDetails=!1,this.currentDetails={}}}},pt=ft,wt=(s("ff6b"),Object(u["a"])(pt,ht,mt,!1,null,"10117ffa",null)),gt=wt.exports,_t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"bg-white doc-container"}),s("transition",{attrs:{name:"fade",duration:200}},[t.showViewers?s("div",{staticClass:"current-viewers-dialog ",attrs:{tabindex:"-1",role:"dialog"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header border-bottom"},[s("h5",{staticClass:"modal-title mb-3"},[t._v("Viewers")]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:t.hideViewers}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),s("div",{staticClass:"modal-body px-0 mx-0 pt-2"},t._l(t.viewers,(function(e){return s("div",{key:e.email,staticClass:" modal-user-details border-bottom ",attrs:{"aria-labelledby":""}},[s("div",{staticClass:"row mx-0 py-2"},[s("div",{staticClass:"col-2 col-offset-1"},[s("img",{staticClass:"rounded-circle user-img-thumb",attrs:{src:"https://ui-avatars.com/api/?name="+e.name.replace(/ /g,"+")+"&size=50",alt:""}})]),s("div",{staticClass:"col-9"},[s("span",{staticClass:"user-name d-block"},[t._v(t._s(e.name))]),s("a",{staticClass:"user-email",attrs:{href:"mailto:"+e.email}},[t._v(t._s(e.email))]),s("span",{staticClass:"d-block text-muted"},[t._v(t._s(t.timeSinceNow(e.pivot.updated_at)))])])])])})),0)])])]):t._e()]),s("transition",{attrs:{name:"fade",duration:200}},[t.showShareDialog?s("div",{staticClass:"share-dialog ",attrs:{tabindex:"-1",role:"dialog"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header border-bottom"},[s("h5",{staticClass:"modal-title mb-3"},[t._v("Share Doc")]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:t.hideShareDialog}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),s("div",{staticClass:"modal-body px-0 mx-0 pt-2"},[t.shared?s("div",{staticClass:"alert alert-success mx-2"},[s("p",{staticClass:"text-center my-auto"},[t._v("This document has been successfully shared")])]):t._e(),t.error?s("div",{staticClass:"alert alert-danger mx-2"},[s("p",{staticClass:"text-center my-auto"},[t._v(t._s(t.message||"Something went wrong"))])]):t._e(),s("div",{staticClass:"row mx-0 px-0"},[s("div",{staticClass:"col-8 mx-auto"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"bmd-label-floating",attrs:{for:"selectEmails"}},[t._v("Add Users to Share")]),s("multiselect",{attrs:{id:"selectEmails","tag-placeholder":"Select a user",placeholder:"Search by email","option-height":20,"custom-label":t.customLabel,"track-by":"email",options:t.userOptions,multiple:!0,taggable:!0},on:{tag:t.addEmail},model:{value:t.values,callback:function(e){t.values=e},expression:"values"}})],1)])])]),s("div",{staticClass:"modal-footer px-5 pb-3"},[s("button",{staticClass:"btn btn-raised btn-primary btn-block",attrs:{disabled:!t.active},on:{click:t.shareDocWithEmails}},[t._v("Share ")])])])])]):t._e()])],1)},bt=[],Ct=(s("99af"),s("4160"),s("159b"),s("8e5f")),yt=s.n(Ct),xt={name:"Main",props:["doc_id"],components:{Multiselect:yt.a},data:function(){return{menuVisible:!1,currentViewers:[1,2,3,4,5,6],showDetails:!1,values:[],active:!0,shared:!1,error:!1,message:!1}},watch:{values:function(){this.error=!1,this.message=""}},computed:{showViewers:function(){return this.$store.getters["docs/showViewers"]},userOptions:function(){return this.$store.getters["docs/users"]},showShareDialog:function(){return this.$store.getters["docs/showShareDialog"]},currentDoc:function(){return this.$store.getters["docs/currentDoc"]},viewers:function(){return Object(vt["a"])(this.$store.getters["docs/viewers"].values())}},methods:{hideViewers:function(){this.$store.commit("docs/hide_viewers")},hideShareDialog:function(){this.$store.commit("docs/hide_share_dialog"),this.active=!0,this.shared=!1},timeSinceNow:function(t){return A.timeSince(t)},addEmail:function(t){console.log(t)},shareDocWithEmails:function(){var t=this;this.active=!1,this.error=!1,this.shared=!1;var e=[];this.values.forEach((function(t){e.push(t.email)})),this.$store.dispatch("docs/shareDoc",{id:this.currentDoc.id,sharingTo:e}).then((function(){t.active=!0,t.shared=!0,t.values=[]})).catch((function(e){t.active=!0,t.error=!0,t.message=e.response.data.message}))},customLabel:function(t){var e=t.email,s=t.name;return"".concat(e,"  ").concat(s)}}},kt=xt,Et=(s("c266"),Object(u["a"])(kt,_t,bt,!1,null,null,null)),Dt=Et.exports,At={title:"Realtime Docs | ",name:"Doc",components:{Layout:dt,Header:gt,Main:Dt},data:function(){return{}},created:function(){this.$store.dispatch("docs/fetchDocument",{id:this.$route.params.id})},beforeMount:function(){var t=this;this.fetchViewers();var e="presence-doc-"+this.$route.params.id;window.Echo.join(e).here((function(e){var s=localStorage.getItem("user")||"{}",r=JSON.parse(s);t.$store.commit("docs/current_viewers",e),t.$store.commit("docs/remove_current_viewer",r)})).joining((function(e){console.table(e),t.$store.commit("docs/add_current_viewer",e)})).leaving((function(e){console.table(e),t.$store.commit("docs/remove_current_viewer",e)}))},beforeRouteEnter:function(t,e,s){s((function(t){t.fetchViewers(),t.$store.dispatch("docs/fetchDocument",{id:t.$route.params.id})}))},watch:{showViewers:function(){!0===this.showViewers&&this.fetchViewers()},currentDoc:function(){this.title=this.currentDoc.title+"| Realtime Docs"}},computed:{showViewers:function(){return this.$store.getters["docs/showViewers"]},currentDoc:function(){return this.$store.getters["docs/currentDoc"]}},methods:{fetchViewers:function(){var t=this,e={id:this.$route.params.id};this.$store.dispatch("docs/fetchViewers",e).then((function(){console.log("Fetched Viewers")})).catch((function(e){console.log(e),void 0===e||e.response.success||(t.error=e.response.data.error)}))}}},$t=At,Pt=(s("9874"),Object(u["a"])($t,nt,ot,!1,null,null,null)),St=Pt.exports,Ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[t.ownedDocs.length<=0?s("div",{staticClass:"mt-2"},[t._m(0)]):t._e(),s("div",{staticClass:"row px-0"},[s("div",{staticClass:"col-11 mx-auto mt-2 px-0"},[s("div",{staticClass:"row px-0 mx-0"},[s("router-link",{staticClass:"card px-3 py-5 col-md-2 col-sm-6 mb-1 doc-card doc-create-card mr-2",attrs:{tag:"div",to:"/docs/create"}},[s("span",{staticClass:"mx-auto my-auto text-dark"},[t._v("Create Doc")]),s("span",{staticClass:"fa fa-plus fa-2x mx-auto my-auto"})]),t._l(t.ownedDocs,(function(e){return s("div",{key:e.id,staticClass:"card col-md-2 col-sm-6 doc-card mr-1 mb-1"},[s("router-link",{staticClass:"card-body d-flex",attrs:{to:"/doc/"+e.id,tag:"div"}},[s("p",{staticClass:"mx-auto my-auto"},[t._v(t._s(e.title))])])],1)}))],2),s("hr"),t.viewedDocs.length>0?s("div",{staticClass:"row mt-2 mb-2 mx-0 px-0"},[s("h5",{},[t._v("Recently Viewed")])]):t._e(),s("div",{staticClass:"row px-0 mx-0 mt-3"},t._l(t.viewedDocs,(function(e){return s("div",{key:"viewed"+e.id,staticClass:"card col-md-2 col-sm-6 doc-card mr-1 mb-1"},[s("router-link",{staticClass:"card-body d-flex",attrs:{to:"/doc/"+e.id,tag:"div"}},[s("p",{staticClass:"mx-auto my-auto"},[t._v(t._s(e.title))])])],1)})),0)])])])},It=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header"},[s("h6",[t._v(" You have not created any document yet")])])}],jt={title:"Realtime Docs",name:"Docs",data:function(){return{email:"",password:"",error:""}},beforeMount:function(){this.fetchOwnedDocs(),this.fetchViewedDocs()},beforeRouteEnter:function(t,e,s){s((function(t){t.fetchOwnedDocs(),t.fetchViewedDocs()}))},watch:{},computed:{ownedDocs:function(){return this.$store.getters["docs/ownedDocs"]||[]},viewedDocs:function(){return this.$store.getters["docs/recentlyViewedDocs"]||[]}},methods:{fetchOwnedDocs:function(){var t=this;this.$store.dispatch("docs/fetchOwnedDocs").then((function(){console.log("Fetched Owned Docs")})).catch((function(e){console.log(e),void 0==e||e.response.success||(t.error=e.response.data.error)}))},fetchViewedDocs:function(){var t=this;this.$store.dispatch("docs/fetchViewedDocs").then((function(){console.log("Fetched Viewed Docs")})).catch((function(e){console.log(e),void 0==e||e.response.success||(t.error=e.response.data.error)}))}}},Vt=jt,Lt=(s("6594"),Object(u["a"])(Vt,Ot,It,!1,null,"d8a66afe",null)),qt=Lt.exports,zt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"row px-0 mx-0 mt-5"},[s("div",{staticClass:"col-sm-10 col-md-10 mx-auto"},[s("div",{staticClass:"card-body"},[s("h5",{staticClass:"text-danger text-uppercase text-center"},[t._v("You are not authorized to view this document")]),s("div",{staticClass:"row mt-5"},[s("div",{staticClass:"d-flex w-100 align-content-center justify-content-center"},[s("router-link",{staticClass:"btn btn-raised btn-info",attrs:{to:"/",tag:"button"}},[t._v("Return Home")])],1)])])])])])},Rt=[],Nt={name:"Error"},Tt=Nt,Mt=(s("9b40"),Object(u["a"])(Tt,zt,Rt,!1,null,"75932606",null)),Ut=Mt.exports,Gt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container "},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-8 bg-white card mt-2 mx-auto px-0"},[t._m(0),s("div",{staticClass:"card-body container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-10 mx-auto"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.createDoc(e)}}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.error.length>0,expression:"error.length > 0"}],staticClass:"alert alert-danger"},[t._v(t._s(t.error))]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"bmd-label-floating",attrs:{for:"title"}},[t._v("Title")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"form-control",attrs:{id:"title",required:"",type:"text"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"bmd-label-floating",attrs:{for:"data"}},[t._v("Data")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data,expression:"data"}],staticClass:"form-control",attrs:{rows:"=5",id:"data"},domProps:{value:t.data},on:{input:function(e){e.target.composing||(t.data=e.target.value)}}})]),s("button",{staticClass:"btn btn-raised btn-primary",attrs:{type:"submit"}},[t._v("Create")])])])])])])])])},Ht=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header mx-0 px-0"},[s("h3",{staticClass:"card-title mx-auto text-center"},[t._v("Create Doc")])])}],Kt={data:function(){return{title:"",data:"",error:""}},watch:{title:function(){this.error=""},data:function(){this.error=""}},methods:{createDoc:function(){var t=this,e=this.title,s=this.data;this.$store.dispatch("docs/create",{title:e,data:{data:s}}).then((function(e){console.log(e),t.$router.push({name:"doc",params:{id:e.data.id}}),console.log("Create doc")})).catch((function(e){console.log(e),void 0==e||e.response.success||(t.error=e.response.data.error)}))}}},Jt=Kt,Ft=Object(u["a"])(Jt,Gt,Ht,!1,null,null,null),Yt=Ft.exports,Bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[t.createdEvents.length<=0?s("div",{staticClass:"mt-2"},[t._m(0)]):t._e(),s("div",{staticClass:"row px-0"},[s("div",{staticClass:"col-11 mx-auto mt-2 px-0"},[s("div",{staticClass:"row px-0 mx-0"},[s("router-link",{staticClass:"card px-3 py-5 col-md-2 col-sm-6 mb-1 doc-card doc-create-card mr-2",attrs:{tag:"div",to:"/event/create"}},[s("span",{staticClass:"mx-auto my-auto text-dark"},[t._v("Create event")]),s("span",{staticClass:"fa fa-plus fa-2x mx-auto my-auto"})]),t._l(t.createdEvents,(function(e){return s("div",{key:e.id,staticClass:"card col-md-2 col-sm-6 doc-card mr-1 mb-1"},[s("router-link",{staticClass:"card-body d-flex",attrs:{to:"/events/"+e.id,tag:"div"}},[s("p",{staticClass:"mx-auto my-auto"},[t._v(t._s(e.title))])])],1)}))],2),s("hr"),t.participatedEvents.length>0?s("div",{staticClass:"row mt-2 mb-2 mx-0 px-0"},[s("h5",{},[t._v("Recently Joined")])]):t._e(),s("div",{staticClass:"row px-0 mx-0 mt-3"},t._l(t.participatedEvents,(function(e){return s("div",{key:"joined_"+e.id,staticClass:"card col-md-2 col-sm-6 doc-card mr-1 mb-1"},[s("router-link",{staticClass:"card-body d-flex",attrs:{to:"/events/"+e.id,tag:"div"}},[s("p",{staticClass:"mx-auto my-auto"},[t._v(t._s(e.title))])])],1)})),0),s("hr"),t.allEvents.length>0?s("div",{staticClass:"row mt-2 mb-2 mx-0 px-0"},[s("h5",{},[t._v("All Events")])]):t._e(),s("div",{staticClass:"row px-0 mx-0 mt-3"},t._l(t.allEvents,(function(e){return s("div",{key:"joined_"+e.id,staticClass:"card col-md-2 col-sm-6 doc-card mr-1 mb-1"},[s("router-link",{staticClass:"card-body d-flex",attrs:{to:"/events/"+e.id,tag:"div"}},[s("p",{staticClass:"mx-auto my-auto"},[t._v(t._s(e.title))])])],1)})),0)])])])},Wt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header"},[s("h6",[t._v(" You have not created any event yet")])])}],Zt={title:"Realtime Events",name:"Events",data:function(){return{error:""}},beforeMount:function(){this.fetchCreatedEvents(),this.fetchParticipatedEvents(),this.fetchAllEvents()},beforeRouteEnter:function(t,e,s){s((function(t){t.fetchCreatedEvents(),t.fetchParticipatedEvents(),t.fetchAllEvents()}))},watch:{},computed:{createdEvents:function(){return this.$store.getters["events/createdEvents"]||[]},participatedEvents:function(){return this.$store.getters["events/participatedEvents"]||[]},allEvents:function(){return this.$store.getters["events/allEvents"]||[]}},methods:{fetchCreatedEvents:function(){var t=this;this.$store.dispatch("events/fetchCreatedEvents").then((function(){console.log("Fetched Created Events")})).catch((function(e){console.log(e),void 0==e||e.response.success||(t.error=e.response.data.error)}))},fetchParticipatedEvents:function(){var t=this;this.$store.dispatch("events/fetchParticipatedEvents").then((function(){console.log("Fetched Participated Events")})).catch((function(e){console.log(e),void 0==e||e.response.success||(t.error=e.response.data.error)}))},fetchAllEvents:function(){var t=this;this.$store.dispatch("events/fetchAllEvents").then((function(){console.log("Fetched all Events")})).catch((function(e){console.log(e),void 0==e||e.response.success||(t.error=e.response.data.error)}))}}},Qt=Zt,Xt=(s("ed93"),Object(u["a"])(Qt,Bt,Wt,!1,null,"453299a1",null)),te=Xt.exports,ee=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("Layout",{scopedSlots:t._u([t.currentEvent?{key:"main",fn:function(){return[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-11 col-md-7 mx-auto mt-2"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-header "},[s("h2",{staticClass:"card-title"},[t._v(" "+t._s(t.currentEvent.title)+" ")]),s("div",{staticClass:"row mb-2 mx-0 px-0"},[s("span",{staticClass:"card-subtitle"},[t._v("Participants : "+t._s(t.currentEvent.participants_count))])]),s("div",{staticClass:"row mb-2 mx-0 px-0"},[s("p",{staticClass:"card-subtitle d-block w-100"},[s("b",[t._v("Starts At")]),t._v(" : "+t._s(t._f("moment")(t.currentEvent.starts_at,"ddd, hA")))]),s("p",{staticClass:"card-subtitle d-block w-100 mt-1"},[s("b",[t._v("Ends At")]),t._v(" : "+t._s(t._f("moment")(t.currentEvent.ends_at,"ddd, hA")))])])]),s("div",{staticClass:"card-body"},[s("p",[t._v(t._s(t.currentEvent.description))])]),s("div",{staticClass:"card-footer"},[s("div",{staticClass:"row mx-0 px-0 mb-1 py-2"},[s("div",{staticClass:"d-flex align-items-center justify-content-center mr-1"}),s("button",{staticClass:" btn btn-default border mr-2",on:{click:t.likeEvent}},[t.currentEvent.likes_count>0?s("i",{staticStyle:{"font-size":"1.45rem",color:"black"}},[t._v(" "+t._s(t.currentEvent.likes_count)+" ")]):t._e(),s("i",{staticClass:"fa fa-thumbs-o-up fa-2x like-btn text-muted"})]),s("button",{staticClass:" btn btn-default border mr-4",on:{click:t.unlikeEvent}},[t.currentEvent.dislikes_count>0?s("i",{staticStyle:{"font-size":"1.45rem",color:"black"}},[t._v(" "+t._s(t.currentEvent.dislikes_count)+" ")]):t._e(),s("i",{staticClass:"fa fa-thumbs-o-down fa-2x like-btn text-muted"})])]),s("div",{staticClass:"row mx-0 px-0"},[t.isOwner?s("button",{staticClass:"btn btn-danger btn-raised",on:{click:t.deleteEvent}},[t._v(" Delete ")]):t._e(),t.isOwner||t.hasParticipated?t._e():s("button",{staticClass:"btn btn-primary btn-raised ml-2",on:{click:t.joinEvent}},[t._v(" Join Event ")]),!t.isOwner&&t.hasParticipated?s("button",{staticClass:"btn btn-warning btn-raised ml-2",on:{click:t.leaveEvent}},[t._v(" Leave Event ")]):t._e()])])])])]),void 0!=t.currentEvent.participants&&t.currentEvent.participants.length>0?s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-7 col-11 mx-auto mt-4"},[s("h5",[t._v("Participants")]),t._l(t.currentEvent.participants,(function(e){return s("div",{key:e.email,staticClass:" border-bottom bg-white card",attrs:{"aria-labelledby":""}},[s("div",{staticClass:"row mx-0 py-2"},[s("div",{staticClass:"col-2 col-offset-1"},[s("img",{staticClass:"rounded-circle user-img-thumb",attrs:{src:"https://ui-avatars.com/api/?name="+e.name.replace(/ /g,"+")+"&size=50",alt:""}})]),s("div",{staticClass:"col-7"},[s("span",{staticClass:"user-name d-block"},[t._v(t._s(e.name))]),s("a",{staticClass:"user-email",attrs:{href:"mailto:"+e.email}},[t._v(t._s(e.email))]),s("span",{staticClass:"d-block text-muted"},[t._v(t._s(t.timeSinceNow(e.pivot.updated_at)))])]),t.isOwner?s("div",{staticClass:"col-2 d-flex align-items-center"},[s("button",{staticClass:" mx-0 btn btn-danger btn-raised",on:{click:function(s){return t.removeParticipant(e.id)}}},[t._v(" Remove ")])]):t._e()])])}))],2)]):t._e()])]},proxy:!0}:null],null,!0)})],1)},se=[],re={title:"Realtime Events | ",name:"Event",components:{Layout:dt},data:function(){return{}},created:function(){this.$store.dispatch("events/fetchEvent",{id:this.$route.params.id}),this.$store.dispatch("events/fetchHasParticipated",{id:this.$route.params.id}),window.Echo=new o["a"]({broadcaster:"pusher",key:"8cbe849dd186fe39a1b4",cluster:"ap2",encrypted:!0,authEndpoint:this.$http.defaults.baseURL+"/broadcasting/auth",auth:{headers:{Authorization:localStorage.getItem("token"),Accept:"application/json"}}})},beforeMount:function(){},beforeRouteEnter:function(t,e,s){s((function(t){t.$store.dispatch("events/fetchEvent",{id:t.$route.params.id}),t.$store.dispatch("events/fetchHasParticipated",{id:t.$route.params.id})}))},watch:{},computed:{isOwner:function(){var t=JSON.parse(localStorage.getItem("user")||"{}");return void 0!==t&&void 0!==this.currentEvent&&void 0!==this.currentEvent.owner&&t.id==this.currentEvent.owner.id},currentEvent:function(){return this.$store.getters["events/currentEvent"]},hasParticipated:function(){return this.$store.getters["events/hasParticipated"]}},methods:{deleteEvent:function(){var t=this;this.$store.dispatch("events/deleteEvent",{id:this.$route.params.id}).then((function(){t.$router.push({name:"events"})}))},joinEvent:function(){var t=this;this.$store.dispatch("events/joinEvent",{id:this.$route.params.id}).then((function(){t.$store.dispatch("events/fetchEvent",{id:t.$route.params.id}),t.$store.dispatch("events/fetchHasParticipated",{id:t.$route.params.id})}))},leaveEvent:function(){var t=this;this.$store.dispatch("events/leaveEvent",{id:this.$route.params.id}).then((function(){t.$store.dispatch("events/fetchEvent",{id:t.$route.params.id}),t.$store.dispatch("events/fetchHasParticipated",{id:t.$route.params.id})}))},removeParticipant:function(t){var e=this;this.$store.dispatch("events/removeParticipant",{id:this.$route.params.id,userId:t}).then((function(){e.$store.dispatch("events/fetchEvent",{id:e.$route.params.id})}))},timeSinceNow:function(t){return A.timeSince(t)},likeEvent:function(){var t=this;this.$store.dispatch("events/likeEvent",{id:this.$route.params.id}).then((function(){t.$store.dispatch("events/fetchEvent",{id:t.$route.params.id})}))},unlikeEvent:function(){var t=this;this.$store.dispatch("events/unlikeEvent",{id:this.$route.params.id}).then((function(){t.$store.dispatch("events/fetchEvent",{id:t.$route.params.id})}))}}},ae=re,ne=(s("12a2"),s("69d4"),Object(u["a"])(ae,ee,se,!1,null,"8bf0633c",null)),oe=ne.exports,ie=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container "},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-8 bg-white card mt-2 mx-auto px-0"},[t._m(0),s("div",{staticClass:"card-body container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-10 mx-auto"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.createDoc(e)}}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.error.length>0,expression:"error.length > 0"}],staticClass:"alert alert-danger"},[t._v(t._s(t.error))]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"bmd-label-floating",attrs:{for:"title"}},[t._v("Title")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"form-control",attrs:{id:"title",required:"",type:"text"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"bmd-label-floating",attrs:{for:"data"}},[t._v("Description")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"form-control",attrs:{rows:"=5",id:"data"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"bmd-label-floating",attrs:{for:"startsAt"}},[t._v("Starts At")]),s("Datetime",{attrs:{"input-class":"form-contro","input-id":"startsAt",type:"datetime","use12-hour":!0,"min-datetime":t.minStartDatetime},model:{value:t.startsAt,callback:function(e){t.startsAt=e},expression:"startsAt"}})],1),s("div",{staticClass:"form-group"},[s("label",{staticClass:"bmd-label-floating",attrs:{for:"endsAt"}},[t._v("Ends At")]),s("Datetime",{attrs:{"input-class":"form-contro","input-id":"endsAt",type:"datetime","use12-hour":!0,"min-datetime":t.minEndDatetime},model:{value:t.endsAt,callback:function(e){t.endsAt=e},expression:"endsAt"}})],1),s("button",{staticClass:"btn btn-raised btn-primary",attrs:{type:"submit"}},[t._v("Create")])])])])])])])])},ce=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header mx-0 px-0"},[s("h3",{staticClass:"card-title mx-auto text-center"},[t._v("Create Event")])])}],ue=(s("a4d3"),s("e01a"),s("859b")),le={components:{Datetime:ue["Datetime"]},data:function(){return{title:"",startsAt:"",endsAt:"",description:"",error:""}},watch:{title:function(){this.error=""},data:function(){this.error=""}},computed:{minStartDatetime:function(){return(new Date).toISOString()},minEndDatetime:function(){return(new Date).toISOString()}},methods:{createDoc:function(){var t=this;this.$store.dispatch("events/create",{title:this.title,description:this.description,startsAt:this.startsAt,endsAt:this.endsAt}).then((function(e){console.log(e),t.$router.push({name:"event",params:{id:e.data.id}}),console.log("Create event")})).catch((function(e){console.log(e),void 0==e||e.response.success||(t.error=e.response.data.error)}))}}},de=le,he=Object(u["a"])(de,ie,ce,!1,null,null,null),me=he.exports;r["a"].use(J["a"]);var ve=new J["a"]({base:"/minion/",mode:"history",routes:[{path:"/",name:"home",component:te,meta:{requiresAuth:!0}},{path:"/error",name:"error",component:Ut},{path:"/docs/create",name:"createDoc",component:Yt,meta:{requiresAuth:!0}},{path:"/login",name:"login",component:Q},{path:"/register",name:"register",component:at},{path:"/docs",name:"docs",component:qt,meta:{requiresAuth:!0}},{path:"/events",name:"events",component:te,meta:{requiresAuth:!0}},{path:"/events/:id",name:"event",component:oe,meta:{requiresAuth:!0}},{path:"/event/create",name:"createEvent",component:me,meta:{requiresAuth:!0}},{path:"/doc/:id",name:"doc",component:St,meta:{requiresAuth:!0,requiresPermission:!0}}]});ve.beforeEach((function(t,e,s){if(t.matched.some((function(t){return t.meta.requiresAuth&&t.meta.requiresPermission})))K.getters["auth/isLoggedIn"]?K.dispatch("docs/checkIsAuthorized",{id:t.params.id}).then((function(){s()})).catch((function(t){console.log(t),s("/error")})):s("/login");else if(t.matched.some((function(t){return t.meta.requiresAuth}))){if(K.getters["auth/isLoggedIn"])return void s();s("/login")}else s()}));var fe=ve;s("ed27"),s("e607"),s("d355");function pe(t){var e=t.$options.title;if(e)return"function"===typeof e?e.call(t):e}var we={created:function(){var t=pe(this);t&&(document.title=t)}};window.Pusher=s("782e"),r["a"].use(s("2ead")),r["a"].mixin(we),r["a"].prototype.$http=p(),r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(d)},store:K,router:fe}).$mount("#app")},"5c0b":function(t,e,s){"use strict";var r=s("9c0c"),a=s.n(r);a.a},6594:function(t,e,s){"use strict";var r=s("f253"),a=s.n(r);a.a},"69d4":function(t,e,s){"use strict";var r=s("c83c"),a=s.n(r);a.a},"82ee":function(t,e,s){},"906e":function(t,e,s){"use strict";var r=s("9113"),a=s.n(r);a.a},9113:function(t,e,s){},9874:function(t,e,s){"use strict";var r=s("e0b2"),a=s.n(r);a.a},"9b40":function(t,e,s){"use strict";var r=s("9f06"),a=s.n(r);a.a},"9c0c":function(t,e,s){},"9f06":function(t,e,s){},b795:function(t,e,s){},c266:function(t,e,s){"use strict";var r=s("3a7d"),a=s.n(r);a.a},c83c:function(t,e,s){},e0b2:function(t,e,s){},ed93:function(t,e,s){"use strict";var r=s("1b55"),a=s.n(r);a.a},f253:function(t,e,s){},ff6b:function(t,e,s){"use strict";var r=s("b795"),a=s.n(r);a.a}});
//# sourceMappingURL=app.fe5bf126.js.map